# 无人机租赁平台 - 用户业务测试步骤

## 测试环境准备

### 1. 后端服务
- 确保后端服务运行：`cd backend && go run cmd/server/main.go`
- 确认端口 8080 正在监听
- 确认 cpolar 隧道已启动

### 2. 测试账号
- **用户 A（飞手）**：手机号 `13800000001`，密码 `123456`
- **用户 C（货主）**：手机号 `13800000003`，密码 `123456`

---

## 一、用户注册与登录

### 测试步骤：
1. 打开 APP，点击"注册"
2. 输入手机号、密码、确认密码
3. 点击"注册"按钮
4. 注册成功后自动跳转到登录页
5. 输入刚注册的手机号和密码
6. 点击"登录"按钮

### 预期结果：
- ✅ 注册成功，显示提示信息
- ✅ 自动跳转到登录页
- ✅ 登录成功，进入首页

---

## 二、实名认证（必须完成才能发布）

### 测试步骤：
1. 登录后，点击底部"我的"
2. 点击"实名认证"卡片
3. 填写真实姓名和身份证号
4. 上传身份证正面照片
5. 上传身份证反面照片
6. 点击"提交认证"

### 预期结果：
- ✅ 提交后显示"待审核"状态
- ✅ 按钮变为灰色，不可重复提交
- ✅ 管理员审核通过后，状态变为"已认证"

---

## 三、飞手发布无人机供给

### 测试步骤（使用用户 A）：
1. 登录用户 A（飞手账号）
2. 确认已完成实名认证
3. 点击底部"发布"按钮
4. 选择"无人机出租"
5. 填写信息：
   - 无人机名称：大疆 Mavic 3
   - 型号：Mavic 3 Cine
   - 日租金：500 元
   - 描述：专业航拍无人机
   - 上传无人机照片
6. 点击"发布"

### 预期结果：
- ✅ 发布成功，显示提示
- ✅ 自动跳转到"我的供给"列表
- ✅ 列表中显示刚发布的无人机
- ✅ 状态显示为"机体空闲"

---

## 四、货主发布货运需求

### 测试步骤（使用用户 C）：
1. 登录用户 C（货主账号）
2. 确认已完成实名认证
3. 点击底部"发布"按钮
4. 选择"货运需求"
5. 填写信息：
   - 货物名称：医疗物资
   - 重量：5 kg
   - 起点：北京市朝阳区
   - 终点：北京市海淀区
   - 预算：800 元
   - 期望时间：选择明天
   - 描述：紧急运输
6. 点击"发布"

### 预期结果：
- ✅ 发布成功
- ✅ 跳转到"我的需求"列表
- ✅ 状态显示为"待接单"

---

## 五、浏览首页供给

### 测试步骤（任意用户）：
1. 点击底部"首页"
2. 查看供给列表（无人机和货运需求）
3. 上拉刷新列表
4. 点击某个供给卡片

### 预期结果：
- ✅ 显示所有可用的供给
- ✅ 区分显示"无人机"和"货运需求"
- ✅ 刷新后列表更新
- ✅ 点击后进入详情页

---

## 六、租赁无人机（完整流程）

### 测试步骤（使用用户 C）：
1. 用户 C 登录，进入首页
2. 找到用户 A 发布的无人机
3. 点击进入详情页
4. 点击"立即租赁"按钮
5. 选择租赁日期（起止日期）
6. 填写用途说明
7. 点击"提交订单"
8. 查看"我的订单"列表

### 预期结果：
- ✅ 订单创建成功
- ✅ 状态显示为"待确认"
- ✅ 飞手（用户 A）能在"我的供给"中看到预约提醒

---

## 七、飞手确认订单

### 测试步骤（使用用户 A）：
1. 用户 A 登录
2. 点击"我的" → "供给管理"
3. 找到有预约的无人机
4. 点击进入详情
5. 查看租赁申请列表
6. 点击"确认"按钮

### 预期结果：
- ✅ 订单状态变为"进行中"
- ✅ 无人机状态变为"使用中"
- ✅ 租客（用户 C）能看到状态更新

---

## 八、接单货运需求

### 测试步骤（使用用户 A）：
1. 用户 A 登录，进入首页
2. 找到用户 C 发布的货运需求
3. 点击进入详情页
4. 点击"接单"按钮
5. 确认接单信息
6. 点击"确认接单"

### 预期结果：
- ✅ 接单成功
- ✅ 订单状态自动变为"进行中"
- ✅ 用户 C 能在"我的订单"中看到接单信息
- ✅ 显示飞手联系方式

---

## 九、完成订单与支付

### 测试步骤（使用用户 C）：
1. 用户 C 登录
2. 进入"我的订单"
3. 找到"进行中"的订单
4. 点击"完成订单"按钮
5. 点击"去支付"
6. 选择支付方式
7. 完成支付

### 预期结果：
- ✅ 订单状态变为"待评价"
- ✅ 支付金额显示正确
- ✅ 飞手能收到订单完成通知

---

## 十、订单评价

### 测试步骤（使用用户 C）：
1. 进入"已完成"的订单详情
2. 点击"评价"按钮
3. 选择星级评分（1-5 星）
4. 填写评价内容
5. 点击"提交评价"

### 预期结果：
- ✅ 评价提交成功
- ✅ 订单状态变为"已完成"
- ✅ 评价不可修改
- ✅ 飞手能看到收到的评价

---

## 十一、消息通知

### 测试步骤（任意用户）：
1. 点击底部"消息"
2. 查看消息列表
3. 点击某条消息
4. 查看详情

### 预期结果：
- ✅ 显示所有系统通知
- ✅ 未读消息有红点标记
- ✅ 点击后消息变为已读
- ✅ 消息按时间倒序排列

---

## 十二、个人中心功能

### 测试步骤：
1. 点击"我的"
2. 查看个人统计信息：
   - 我的供给数量
   - 我的需求数量
   - 我的订单数量
3. 点击"供给管理"
4. 点击"需求管理"
5. 点击"编辑资料"
6. 修改昵称、头像
7. 点击"退出登录"

### 预期结果：
- ✅ 统计数据准确
- ✅ 各管理页面能正确跳转
- ✅ 资料修改保存成功
- ✅ 退出后返回登录页

---

## 常见问题排查

### 1. 无法登录
- 检查手机号格式是否正确（11 位数字）
- 检查密码是否正确
- 检查网络连接（cpolar 是否运行）

### 2. 无法发布供给/需求
- 确认是否已完成实名认证
- 检查必填字段是否填写完整
- 检查照片是否上传成功

### 3. 看不到订单
- 刷新页面
- 检查订单状态筛选
- 确认是否在正确的账号下

### 4. 支付失败
- 这是测试环境，支付功能仅演示流程
- 实际支付需要接入真实支付平台

---

## 测试完成检查清单

- [ ] 注册登录功能正常
- [ ] 实名认证流程完整
- [ ] 无人机发布与租赁流程正常
- [ ] 货运需求发布与接单流程正常
- [ ] 订单状态流转正确
- [ ] 支付流程演示正常
- [ ] 评价功能可用
- [ ] 消息通知正常
- [ ] 个人中心功能完整

---

**测试完成后，如有问题请记录：**
- 问题描述
- 复现步骤
- 截图或日志
